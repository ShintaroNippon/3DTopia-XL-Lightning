name: "3dtopia-xl-robot-generator"
description: "3DTopia-XL optimized for L4 GPU with GLB export"

image:
  build_context: "."
  dockerfile: "Dockerfile"

compute:
  gpu: "L4"
  memory: "24GB"
  disk_size: "100GB"
  cpu: "4"

ports:
  - "7860:7860"

env:
  - "TORCH_CUDA_ARCH_LIST=7.5 8.0 8.6+PTX"
  - "FORCE_CUDA=1"
  - "PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:256"
  - "CUDA_LAUNCH_BLOCKING=0"
  - "GRADIO_SERVER_NAME=0.0.0.0"
  - "GRADIO_SERVER_PORT=7860"

volumes:
  - name: "models"
    mount_path: "/workspace/pretrained"
    size: "30GB"
  - name: "outputs"
    mount_path: "/workspace/outputs"
    size: "25GB"
  - name: "cache"
    mount_path: "/workspace/cache"
    size: "10GB"

startup_commands:
  - "/workspace/download_models.sh"